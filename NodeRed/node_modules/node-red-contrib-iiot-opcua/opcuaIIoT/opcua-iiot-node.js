"use strict";module.exports=function(t){require("source-map-support").install();var s=require("./core/opcua-iiot-core");t.nodes.registerType("OPCUA-IIoT-Node",function(e){t.nodes.createNode(this,e),this.nodeId=e.nodeId,this.datatype=e.datatype,this.value=e.value,this.topic=e.topic,this.name=e.name,this.injectType=e.injectType,this.showErrors=e.showErrors;var i=this;i.bianco=s.createBiancoIIoT(),s.assert(i.bianco.iiot),i.bianco.iiot.subscribed=!1,i.status({fill:"blue",shape:"ring",text:"new"}),i.on("input",function(t){if(t.nodetype="node",t.injectType=t.injectType||i.injectType,i.bianco.iiot.subscribed=!i.bianco.iiot.subscribed,"listen"===i.injectType?i.bianco.iiot.subscribed?i.status({fill:"blue",shape:"dot",text:"subscribed"}):i.status({fill:"blue",shape:"ring",text:"not subscribed"}):i.status({fill:"blue",shape:"dot",text:"injected"}),t.topic=t.topic||i.topic,t.addressSpaceItems=t.addressSpaceItems||[],"write"===i.injectType){t.valuesToWrite=t.valuesToWrite||[],t.addressSpaceItems.push({name:i.name,nodeId:i.nodeId,datatypeName:i.datatype});try{t.valuesToWrite.push(s.convertDataValueByDataType({value:""===i.value?t.payload:i.value},i.datatype))}catch(e){s.internalDebugLog(e),i.showErrors&&i.error(e,t)}}else t.addressSpaceItems.push({name:i.name,nodeId:i.nodeId,datatypeName:i.datatype});s.internalDebugLog("node msg stringified: "+JSON.stringify(t)),i.send(t)})})};
//# sourceMappingURL=maps/opcua-iiot-node.js.map
