"use strict";module.exports=function(t){require("source-map-support").install();var o=require("./core/opcua-iiot-core-listener");t.nodes.registerType("OPCUA-IIoT-Event",function(e){t.nodes.createNode(this,e),this.eventType=e.eventType,this.eventTypeLabel=e.eventTypeLabel,this.resultType=e.resultType||"basic",this.queueSize=e.queueSize,this.usingListener=e.usingListener,this.name=e.name,this.showStatusActivities=e.showStatusActivities,this.showErrors=e.showErrors;var n=this;n.bianco=o.core.createBiancoIIoT(),o.core.assert(n.bianco.iiot),n.bianco.iiot.subscribed=!1,n.status({fill:"blue",shape:"ring",text:"new"}),n.on("input",function(e){n.bianco.iiot.subscribed=!n.bianco.iiot.subscribed,n.usingListener?n.bianco.iiot.subscribed?n.status({fill:"blue",shape:"dot",text:"subscribed"}):n.status({fill:"blue",shape:"ring",text:"not subscribed"}):n.status({fill:"blue",shape:"dot",text:"injected"});var t=o.getBasicEventFields();switch(n.resultType){case"condition":t.push(o.getConditionFields());break;case"state":t.push(o.getStateFields());break;case"all":t.push(o.getAllEventFields())}var i=o.core.nodeOPCUA.constructEventFilter(t),s=1e3;"number"==typeof e.payload&&(s=e.payload),e.nodetype="events";var a={eventType:e.payload.eventType||n.eventType,eventFilter:e.payload.uaEventFilter||i,eventFields:e.payload.uaEventFields||t,queueSize:e.payload.queueSize||n.queueSize,interval:e.payload.interval||s};e.payload=a,n.send(e)})})};
//# sourceMappingURL=maps/opcua-iiot-event.js.map
