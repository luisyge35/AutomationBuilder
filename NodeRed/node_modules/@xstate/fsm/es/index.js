/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var t;!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(t||(t={}));var n={type:"xstate.init"},e="xstate.assign";function r(t){return void 0===t?[]:[].concat(t)}function i(t){return{type:e,assignment:t}}function o(t,n){return"string"==typeof(t="string"==typeof t&&n&&n[t]?n[t]:t)?{type:t}:"function"==typeof t?{type:t.name,exec:t}:t}function a(t){return function(n){return t===n}}function u(t){return"string"==typeof t?{type:t}:t}function c(t,n){return{value:t,context:n,actions:[],changed:!1,matches:a(t)}}function f(t,n){void 0===n&&(n={});var i={config:t,_options:n,initialState:{value:t.initial,actions:r(t.states[t.initial].entry).map((function(t){return o(t,n.actions)})),context:t.context,matches:a(t.initial)},transition:function(n,f){var s,l,v="string"==typeof n?{value:n,context:t.context}:n,p=v.value,g=v.context,y=u(f),d=t.states[p];if(d.on){var x=r(d.on[y.type]),m=function(n){if(void 0===n)return{value:c(p,g)};var r="string"==typeof n?{target:n}:n,u=r.target,f=void 0===u?p:u,s=r.actions,l=void 0===s?[]:s,v=r.cond,x=g;if((void 0===v?function(){return!0}:v)(g,y)){var m=t.states[f],h=!1,S=[].concat(d.exit,l,m.entry).filter((function(t){return t})).map((function(t){return o(t,i._options.actions)})).filter((function(t){if(t.type===e){h=!0;var n=Object.assign({},x);return"function"==typeof t.assignment?n=t.assignment(x,y):Object.keys(t.assignment).forEach((function(e){n[e]="function"==typeof t.assignment[e]?t.assignment[e](x,y):t.assignment[e]})),x=n,!1}return!0}));return{value:{value:f,context:x,actions:S,changed:f!==p||S.length>0||h,matches:a(f)}}}};try{for(var h=function(t){var n="function"==typeof Symbol&&t[Symbol.iterator],e=0;return n?n.call(t):{next:function(){return t&&e>=t.length&&(t=void 0),{value:t&&t[e++],done:!t}}}}(x),S=h.next();!S.done;S=h.next()){var b=m(S.value);if("object"==typeof b)return b.value}}catch(t){s={error:t}}finally{try{S&&!S.done&&(l=h.return)&&l.call(h)}finally{if(s)throw s.error}}}return c(p,g)}};return i}var s=function(t,n){return t.actions.forEach((function(e){var r=e.exec;return r&&r(t.context,n)}))};function l(e){var r=e.initialState,i=t.NotStarted,o=new Set,a={_machine:e,send:function(n){i===t.Running&&(r=e.transition(r,n),s(r,u(n)),o.forEach((function(t){return t(r)})))},subscribe:function(t){return o.add(t),t(r),{unsubscribe:function(){return o.delete(t)}}},start:function(){return i=t.Running,s(r,n),a},stop:function(){return i=t.Stopped,o.forEach((function(t){return o.delete(t)})),a},get status(){return i}};return a}export{t as InterpreterStatus,i as assign,f as createMachine,l as interpret};
