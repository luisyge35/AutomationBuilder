"use strict";module.exports=function(t){require("source-map-support").install();var s=require("./modbus-basics"),r=require("debug")("contribModbus:flex:connector");t.nodes.registerType("modbus-flex-connector",function(e){t.nodes.createNode(this,e),this.name=e.name,this.maxReconnectsPerMinute=e.maxReconnectsPerMinute||4,this.emptyQueue=e.emptyQueue,this.showStatusActivities=e.showStatusActivities,this.showErrors=e.showErrors,this.connection=null,this.internalDebugLog=r,this.verboseLogging=t.settings.verbose;var o=this;s.setNodeStatusTo("waiting",o);var n=t.nodes.getNode(e.server);n&&(n.registerForModbus(o),s.initModbusClientEvents(o,n),o.onConfigDone=function(e){o.showStatusActivities&&s.setNodeStatusTo("config done",o),e.config_change="emitted",o.send(e)},o.onConfigError=function(e,t){r(e.message),o.showErrors&&o.error(e,t),e&&e.message?t.error=e:t.error=new Error(e),t.error.nodeStatus=o.statusText,o.emptyMsgOnFail&&(t.payload=""),o.send(t)},o.on("input",function(e){if(!s.invalidPayloadIn(e)&&n.client)if(o.showStatusActivities&&s.setNodeStatusTo(n.actualServiceState,o),e.payload.connectorType)r("dynamicReconnect: "+JSON.stringify(e.payload)),e.payload.emptyQueue=o.emptyQueue,n.emit("dynamicReconnect",e,o.onConfigDone,o.onConfigError);else{var t=new Error("Payload Not Valid - Connector Type");o.error(t,e),o.send(e)}}))})};
//# sourceMappingURL=maps/modbus-flex-connector.js.map
